{"version":3,"sources":["./projects/ngx-markdown-editor/src/lib/component/markdown-editor.component.ts","./projects/ngx-markdown-editor/src/lib/component/markdown-editor.component.html","./projects/ngx-markdown-editor/src/lib/services/keybindings.service.ts","./projects/ngx-markdown-editor/src/lib/services/toolbar.service.ts","./projects/demo/src/app/app.module.ts","./projects/ngx-markdown-editor/src/lib/types/observable-emitter.ts","./projects/ngx-markdown-editor/src/public-api.ts","./projects/demo/src/app/app.component.ts","./projects/demo/src/app/app.component.html","./projects/ngx-markdown-editor/src/lib/component/markdown-editor.module.ts","./projects/demo/src/environments/environment.ts","./projects/ngx-markdown-editor/src/lib/util/from-cm-event.ts","./projects/ngx-markdown-editor/src/lib/services/statusbar.service.ts","./projects/demo/src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  Host,\r\n  HostBinding,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChange,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { MatSelect } from '@angular/material/select';\r\nimport { MatTooltipDefaultOptions, MAT_TOOLTIP_DEFAULT_OPTIONS } from '@angular/material/tooltip';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { DEFAULT_OPTIONS, MarkdownEditor, MarkdownEditorOptions } from '@mdefy/markdown-editor-core';\r\nimport { Editor, EditorChangeLinkedList } from 'codemirror';\r\nimport { MarkdownComponent, MarkdownService } from 'ngx-markdown';\r\nimport { Observable, Subject, Subscription } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { Keybindings } from '../services/keybindings.service';\r\nimport { StatusbarService } from '../services/statusbar.service';\r\nimport { ToolbarService } from '../services/toolbar.service';\r\nimport { LanguageTag } from '../types/language-tag';\r\nimport { ObservableEmitter } from '../types/observable-emitter';\r\nimport { OptionalI18n } from '../types/optional-i18n';\r\nimport { Options } from '../types/options';\r\nimport { StatusbarItemDef, StatusbarItemNormalized } from '../types/statusbar';\r\nimport { Icon, ToolbarItemDef, ToolbarItemNormalized } from '../types/toolbar';\r\nimport { fromCmEvent } from '../util/from-cm-event';\r\n\r\nconst markdownEditorTooltipDefaults: MatTooltipDefaultOptions = {\r\n  showDelay: 1000,\r\n  hideDelay: 0,\r\n  touchendHideDelay: 1000,\r\n};\r\n\r\n@Component({\r\n  selector: 'ngx-markdown-editor',\r\n  templateUrl: './markdown-editor.component.html',\r\n  styleUrls: ['./markdown-editor.component.scss'],\r\n  providers: [\r\n    { provide: MAT_TOOLTIP_DEFAULT_OPTIONS, useValue: markdownEditorTooltipDefaults },\r\n    ToolbarService,\r\n    StatusbarService,\r\n  ],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class MarkdownEditorComponent implements OnInit, OnChanges, OnDestroy {\r\n  /**\r\n   * Data string to set as content of the editor.\r\n   */\r\n  @Input() readonly data: string = '';\r\n\r\n  /**\r\n   * Options to configure _Ngx Markdown Editor_.\r\n   *\r\n   * Basically `MarkdownEditorOptions` from _Markdown Editor Core_ are forwarded,\r\n   * including some adjustments and extensions.\r\n   */\r\n  @Input() readonly options: Options = {};\r\n\r\n  /**\r\n   * Custom set of toolbar items.\r\n   */\r\n  @Input() readonly toolbar: ToolbarItemDef[] = [];\r\n\r\n  /**\r\n   * Custom set of statusbar items.\r\n   */\r\n  @Input() readonly statusbar: StatusbarItemDef[] = [];\r\n\r\n  /**\r\n   * The current language applied to internationalized items.\r\n   */\r\n  @Input() readonly language: LanguageTag = 'en';\r\n\r\n  /**\r\n   * The label text displayed at the top of the component. The label will be hidden, if this is `undefined`.\r\n   */\r\n  @Input() readonly label?: string;\r\n\r\n  /**\r\n   * Specifies whether the editor is a required form field. An asterisk will be appended to the label.\r\n   */\r\n  @Input() readonly required = false;\r\n\r\n  /**\r\n   * Specifies whether and which Angular Material style is used.\r\n   */\r\n  @Input() readonly materialStyle: boolean | 'standard' | 'fill' | 'legacy' = false;\r\n\r\n  /**\r\n   * Specifies whether the editor is disabled.\r\n   */\r\n  @Input() readonly disabled = false;\r\n\r\n  /**\r\n   * Specifies whether the toolbar is rendered.\r\n   */\r\n  @Input() readonly showToolbar = true;\r\n\r\n  /**\r\n   * Specifies whether the statusbar is rendered.\r\n   */\r\n  @Input() readonly showStatusbar = true;\r\n\r\n  /**\r\n   * Specifies whether tooltips are shown for toolbar items.\r\n   */\r\n  @Input() readonly showTooltips = true;\r\n\r\n  /**\r\n   * Specifies whether the key combination is included in the tooltip.\r\n   */\r\n  @Input() readonly shortcutsInTooltips = true;\r\n\r\n  /**\r\n   * Emits when the editor's content changes.\r\n   */\r\n  @Output() contentChange = new ObservableEmitter<{ instance: Editor; changes: EditorChangeLinkedList[] }>();\r\n\r\n  /**\r\n   * Emits when the editor's cursor is moved.\r\n   */\r\n  @Output() cursorActivity = new ObservableEmitter<{ instance: Editor }>();\r\n\r\n  /**\r\n   * Emits when the editor receives focus.\r\n   */\r\n  @Output() editorFocus = new ObservableEmitter<{ instance: Editor; event: FocusEvent }>();\r\n\r\n  /**\r\n   * Emits when the editor loses focus.\r\n   */\r\n  @Output() editorBlur = new ObservableEmitter<{ instance: Editor; event: FocusEvent }>();\r\n\r\n  /**\r\n   * The `mat-select` element of `setHeadingLevel`.\r\n   */\r\n  @ViewChild('setHeadingLevel') setHeadingLevelDropdown: MatSelect;\r\n\r\n  /**\r\n   * The `MarkdownEditor` instance of _Markdown Editor Core_.\r\n   */\r\n  @ViewChild('markdown') markdown: MarkdownComponent;\r\n\r\n  /**\r\n   * The `MarkdownEditor` instance of _Markdown Editor Core_.\r\n   */\r\n  public mde: MarkdownEditor;\r\n\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public normalizedToolbarItems: ToolbarItemNormalized[] = [];\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public activeToolbarItems: (boolean | number)[] = [];\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public toolbarItemTooltips: string[] = [];\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public normalizedStatusbarItems: StatusbarItemNormalized[] = [];\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public showPreview = false;\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public showSideBySidePreview = false;\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public blockBlur = false;\r\n  /**\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  public focused = false;\r\n\r\n  private shortcutResetter = new Subject();\r\n\r\n  @HostBinding('class.disabled') get disabledStyle() {\r\n    return this.disabled;\r\n  }\r\n  @HostBinding('class.default') get default() {\r\n    return !this.options.editorThemes && !this.materialStyle;\r\n  }\r\n  @HostBinding('class.material') get material() {\r\n    return this.materialStyle;\r\n  }\r\n  @HostBinding('class') get class() {\r\n    return this.options.editorThemes;\r\n  }\r\n  @HostBinding('class.appearance-standard') get appearanceStandard() {\r\n    return this.materialStyle === true || this.materialStyle === 'standard';\r\n  }\r\n  @HostBinding('class.appearance-fill') get appearanceFill() {\r\n    return this.materialStyle === 'fill';\r\n  }\r\n  @HostBinding('class.appearance-legacy') get appearanceLegacy() {\r\n    return this.materialStyle === 'legacy';\r\n  }\r\n  @HostBinding('class.focused') get focusedStyle() {\r\n    return this.focused;\r\n  }\r\n\r\n  constructor(\r\n    private readonly iconRegistry: MatIconRegistry,\r\n    private readonly domSanitizer: DomSanitizer,\r\n    private readonly hotkeys: Keybindings,\r\n    private readonly hostElement: ElementRef,\r\n    private readonly markdownService: MarkdownService,\r\n    @Host() private readonly toolbarService: ToolbarService,\r\n    @Host() private readonly statusbarService: StatusbarService\r\n  ) {\r\n    // Render checkbox dummies which can be replaced by an `<input type=\"checkbox\"> later,\r\n    // because the checkboxes rendered by marked.js inside ngx-markdown are removed by Angular sanitizer.\r\n    this.markdownService.renderer.checkbox = (checked) => (checked ? '[x] ' : '[ ] ');\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  ngOnInit(): void {\r\n    const wrapper = this.hostElement.nativeElement.querySelector('.ngx-markdown-editor-text-editor') as HTMLElement;\r\n    this.mde = new MarkdownEditor(wrapper, this.mapOptions(this.options));\r\n\r\n    this.contentChange.emitObservable(fromCmEvent(this.mde.cm, 'changes'));\r\n    this.cursorActivity.emitObservable(fromCmEvent(this.mde.cm, 'cursorActivity'));\r\n    this.editorFocus.emitObservable(fromCmEvent(this.mde.cm, 'focus'));\r\n    this.editorBlur.emitObservable(fromCmEvent(this.mde.cm, 'blur'));\r\n\r\n    this.toolbarService.defineDefaultItems(this);\r\n    this.statusbarService.defineDefaultItems(this.mde);\r\n\r\n    // Necessary to apply `this.mde` instance to default toolbar items\r\n    // as `ngOnChanges()` is executed before `ngOnInit()`.\r\n    this.ngOnChanges({ data: new SimpleChange(undefined, this.data, true) });\r\n    this.mde.cm.clearHistory();\r\n\r\n    fromCmEvent(this.mde.cm, 'focus').subscribe(() => {\r\n      this.focused = true;\r\n    });\r\n    fromCmEvent(this.mde.cm, 'blur').subscribe(() => {\r\n      if (!this.blockBlur) this.focused = false;\r\n    });\r\n    fromCmEvent(this.mde.cm, 'cursorActivity').subscribe(() => {\r\n      this.determineActiveButtons();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (this.mde) {\r\n      if (this.showToolbar) {\r\n        this.applyToolbarItems();\r\n      }\r\n      if (this.showStatusbar) {\r\n        this.applyStatusbarItems();\r\n      }\r\n      this.applyDisabled();\r\n      this.mde.setOptions(this.mapOptions(this.options));\r\n      if (changes.data) {\r\n        this.mde.setContent(changes.data.currentValue);\r\n      }\r\n      this.createTooltips();\r\n      this.determineActiveButtons();\r\n      this.setCodeMirrorClasses();\r\n      this.applyMaterialStyle();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  ngOnDestroy() {\r\n    this.shortcutResetter.next();\r\n    this.shortcutResetter.complete();\r\n  }\r\n\r\n  /**\r\n   * Toggles the full-size preview.\r\n   */\r\n  togglePreview() {\r\n    this.showPreview = !this.showPreview;\r\n    this.showSideBySidePreview = false;\r\n    if (this.showPreview) {\r\n      // Necessary to wait until Angular change detector has finished\r\n      setTimeout(() => this.hostElement.nativeElement.querySelector('.ngx-markdown-editor-wrapper')?.focus(), 100);\r\n    } else {\r\n      // Necessary to wait until Angular change detector has finished\r\n      setTimeout(() => this.mde.focus(), 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles the side-by-side preview.\r\n   */\r\n  toggleSideBySidePreview() {\r\n    this.showSideBySidePreview = !this.showSideBySidePreview;\r\n    this.showPreview = false;\r\n    // Timeout necessary until Angular change detector has finished\r\n    setTimeout(() => {\r\n      this.mde.focus();\r\n      this.mde.cm.refresh();\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * Triggered when a toolbar button is clicked.\r\n   *\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  onButtonClick(item: ToolbarItemNormalized) {\r\n    item.action();\r\n    this.mde.focus();\r\n    this.determineActiveButtons();\r\n  }\r\n\r\n  /**\r\n   * Resolves the shortcut for the specified item and appends it to the item's tooltip text,\r\n   * if `shortcutsInTooltips` is enabled.\r\n   *\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  createTooltip(item: ToolbarItemNormalized): string {\r\n    let shortcut: string | undefined = this.mde.getShortcuts()[item.name] || item.shortcut;\r\n    if (item.name === 'undo') shortcut = 'Ctrl-Z';\r\n    else if (item.name === 'redo') shortcut = 'Shift-Ctrl-Z';\r\n    if (/Mac/.test(navigator.platform)) shortcut = shortcut?.replace(/Ctrl/gi, 'Cmd');\r\n    const shortcutString = this.shortcutsInTooltips && shortcut ? ' (' + shortcut + ')' : '';\r\n    return item.tooltip + shortcutString;\r\n  }\r\n\r\n  /**\r\n   * Replaces the checkbox dummies rendered inside the preview with actual checkboxes (also see constructor).\r\n   *\r\n   * _Not intended to be used outside the component. Only made public for access inside template._\r\n   */\r\n  replaceCheckboxDummies() {\r\n    this.markdown?.element.nativeElement.querySelectorAll('li').forEach((el) =>\r\n      el.childNodes.forEach((node) => {\r\n        if (node.nodeType === 3) {\r\n          if (/^\\[ \\] /.test(node.nodeValue || '')) {\r\n            const input = document.createElement('input');\r\n            input.setAttribute('type', 'checkbox');\r\n            input.setAttribute('disabled', '');\r\n            el.insertBefore(input, node);\r\n            node.nodeValue = node.nodeValue?.replace(/^\\[ \\]/, '') || null;\r\n          } else if (/^\\[x\\] /.test(node.nodeValue || '')) {\r\n            const input = document.createElement('input');\r\n            input.setAttribute('type', 'checkbox');\r\n            input.setAttribute('disabled', '');\r\n            input.setAttribute('checked', '');\r\n            el.insertBefore(input, node);\r\n            node.nodeValue = node.nodeValue?.replace(/^\\[x\\]/, '') || null;\r\n          }\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Maps `NgxMdeOptions` to `MarkdownEditorOptions`.\r\n   */\r\n  private mapOptions(options: Options | undefined): MarkdownEditorOptions | undefined {\r\n    if (!options) {\r\n      return undefined;\r\n    }\r\n\r\n    const getMarkdownGuideUrl = (url: OptionalI18n<string> | undefined): string | undefined => {\r\n      if (!url) return undefined;\r\n\r\n      if (typeof url === 'string') {\r\n        return url;\r\n      } else {\r\n        return url[this.language] || url.default;\r\n      }\r\n    };\r\n\r\n    const markupTheme = options.markupThemes || [];\r\n    let editorThemes = options.editorThemes || [];\r\n    if (this.materialStyle) {\r\n      editorThemes = editorThemes ? editorThemes.concat('mde-material') : ['mde-material'];\r\n    } else {\r\n      if (editorThemes) {\r\n        const index = editorThemes.findIndex((t) => t === 'mde-material');\r\n        if (index > -1) editorThemes.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    const shortcuts: Options['shortcuts'] = {};\r\n\r\n    for (const actionName in DEFAULT_OPTIONS.shortcuts) {\r\n      if (options.shortcuts) {\r\n        shortcuts[actionName] = options.shortcuts[actionName];\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...options,\r\n      shortcuts,\r\n      disabled: this.disabled,\r\n      themes: editorThemes.concat(markupTheme),\r\n      markdownGuideUrl: getMarkdownGuideUrl(options.markdownGuideUrl),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Applies the custom toolbar or the default toolbar as fallback.\r\n   */\r\n  private applyToolbarItems() {\r\n    let items: ToolbarItemDef[];\r\n    if (this.toolbar.length) {\r\n      items = this.toolbar;\r\n    } else {\r\n      items = this.toolbarService.DEFAULT_TOOLBAR;\r\n    }\r\n    this.normalizedToolbarItems = [];\r\n    for (const toolbarItem of items) {\r\n      const item = this.getNormalizedItem(toolbarItem);\r\n      if (!item) {\r\n        console.warn(`No default item defined for name \"${toolbarItem}\"`);\r\n        continue;\r\n      }\r\n      this.addSvgIcon(item);\r\n      this.normalizedToolbarItems.push(item);\r\n    }\r\n    this.applyShortcuts(this.normalizedToolbarItems);\r\n  }\r\n\r\n  /**\r\n   * Returns a complete item for all combinations of how a toolbar item can be specified and\r\n   * resolves the current value of internationalized properties. Only returns `undefined` for\r\n   * items specified by name and no such item can be found.\r\n   *\r\n   * In detail, item normalization means (in addition to i18n resolution):\r\n   * - For built-in items specified by name string, resolves the default item.\r\n   * - For built-in items specified partly, completes the object with default values for the missing properties.\r\n   * - For custom items specified partly, completes the object with empty values for the missing properties.\r\n   * - For custom items specified fully, returns as is.\r\n   * - For unknown items specified by name string, returns `undefined`.\r\n   */\r\n  private getNormalizedItem(toolbarItem: ToolbarItemDef): ToolbarItemNormalized | undefined {\r\n    const getTooltip = (tooltip: OptionalI18n<string>): string => {\r\n      if (typeof tooltip === 'string') {\r\n        return tooltip;\r\n      } else {\r\n        return tooltip[this.language] || tooltip.default;\r\n      }\r\n    };\r\n\r\n    const getIcon = (icon: OptionalI18n<Icon>): Icon => {\r\n      if ('format' in icon) {\r\n        return icon;\r\n      } else {\r\n        return icon[this.language] || icon.default;\r\n      }\r\n    };\r\n\r\n    if (typeof toolbarItem === 'string') {\r\n      return this.toolbarService.getDefaultItem(toolbarItem);\r\n    } else {\r\n      let defaultItem = this.toolbarService.getDefaultItem(toolbarItem.name);\r\n      if (!defaultItem) {\r\n        defaultItem = {\r\n          name: '',\r\n          action: () => {},\r\n          tooltip: '',\r\n          icon: { format: 'material', iconName: '' },\r\n          disableOnPreview: false,\r\n        };\r\n      }\r\n      return {\r\n        name: toolbarItem.name,\r\n        action: toolbarItem.action || defaultItem.action,\r\n        shortcut: toolbarItem.shortcut || defaultItem.shortcut,\r\n        isActive: toolbarItem.isActive || defaultItem.isActive,\r\n        tooltip: (toolbarItem.tooltip && getTooltip(toolbarItem.tooltip)) || defaultItem.tooltip,\r\n        icon: (toolbarItem.icon && getIcon(toolbarItem.icon)) || defaultItem.icon,\r\n        disableOnPreview: toolbarItem.disableOnPreview || defaultItem?.disableOnPreview,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates tooltips for all configured toolbar items and stores them in `this.toolbarItemTooltips`.\r\n   */\r\n  private createTooltips() {\r\n    this.toolbarItemTooltips = new Array(this.normalizedToolbarItems.length);\r\n    for (let i = 0; i < this.normalizedToolbarItems.length; i++) {\r\n      const item = this.normalizedToolbarItems[i];\r\n      this.toolbarItemTooltips[i] = this.showTooltips ? this.createTooltip(item) : '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies custom shortcuts.\r\n   *\r\n   * For items, whose actions originate in _Markdown Editor Core_, `options.shortcuts` is\r\n   * modified. For items that are specific to _Ngx Markdown Editor_ keybindings are applied to\r\n   * the `<ngx-markdown-editor>` element.\r\n   */\r\n  private applyShortcuts(items: ToolbarItemNormalized[]) {\r\n    if (this.options.shortcutsEnabled === 'none') {\r\n      return;\r\n    }\r\n\r\n    const applySetHeadingLevelShortcut = (shortcut: string) => {\r\n      const s = shortcut.replace(/(\\w)-/gi, '$1.').replace(/Ctrl/gi, 'Control').replace(/Cmd/gi, 'Meta');\r\n      return this.hotkeys\r\n        .addKeybinding(this.hostElement.nativeElement, s)\r\n        .pipe(takeUntil(this.shortcutResetter))\r\n        .subscribe(() => {\r\n          this.blockBlur = true;\r\n          this.setHeadingLevelDropdown.open();\r\n          this.setHeadingLevelDropdown.focus();\r\n        });\r\n    };\r\n\r\n    const applyShortcut = (shortcut: string, action: () => void) => {\r\n      const s = shortcut.replace(/(\\w)-/gi, '$1.').replace(/Ctrl/gi, 'Control').replace(/Cmd/gi, 'Meta');\r\n      return this.hotkeys\r\n        .addKeybinding(this.hostElement.nativeElement, s)\r\n        .pipe(takeUntil(this.shortcutResetter))\r\n        .subscribe(() => {\r\n          action();\r\n          this.determineActiveButtons();\r\n        });\r\n    };\r\n\r\n    this.shortcutResetter.next();\r\n    const shortcuts = {};\r\n    const appliedNgxMdeShortcuts: { [name: string]: Subscription | undefined } = {};\r\n\r\n    if (this.options.shortcutsEnabled !== 'customOnly') {\r\n      const previewItem = this.toolbarService.getDefaultItem('togglePreview');\r\n      if (previewItem?.shortcut) {\r\n        const subscription = applyShortcut(previewItem.shortcut, previewItem.action);\r\n        appliedNgxMdeShortcuts[previewItem.name] = subscription;\r\n      }\r\n\r\n      const sideBySidePreviewItem = this.toolbarService.getDefaultItem('toggleSideBySidePreview');\r\n      if (sideBySidePreviewItem?.shortcut) {\r\n        const subscription = applyShortcut(sideBySidePreviewItem.shortcut, sideBySidePreviewItem.action);\r\n        appliedNgxMdeShortcuts[sideBySidePreviewItem.name] = subscription;\r\n      }\r\n    }\r\n\r\n    for (const item of items) {\r\n      if (item.name === 'setHeadingLevel' && item.shortcut) {\r\n        const subscription = applySetHeadingLevelShortcut(item.shortcut);\r\n        appliedNgxMdeShortcuts[item.name] = subscription;\r\n      } else if (item.name in DEFAULT_OPTIONS.shortcuts) {\r\n        shortcuts[item.name] = item.shortcut;\r\n      } else if (item.shortcut) {\r\n        appliedNgxMdeShortcuts[item.name]?.unsubscribe();\r\n        const subscription = applyShortcut(item.shortcut, item.action);\r\n        appliedNgxMdeShortcuts[item.name] = subscription;\r\n      }\r\n    }\r\n\r\n    for (const actionName in this.options.shortcuts) {\r\n      if (this.options.shortcuts[actionName]) {\r\n        const shortcut = this.options.shortcuts[actionName];\r\n        if (actionName === 'setHeadingLevel') {\r\n          const item = items.find((i) => i.name === actionName);\r\n          if (item) {\r\n            appliedNgxMdeShortcuts[actionName]?.unsubscribe();\r\n            applySetHeadingLevelShortcut(shortcut);\r\n            item.shortcut = shortcut;\r\n          }\r\n        } else if (actionName in DEFAULT_OPTIONS.shortcuts) {\r\n          shortcuts[actionName] = shortcut;\r\n        } else {\r\n          const item = items.find((i) => i.name === actionName);\r\n          const defaultItem = this.toolbarService.getDefaultItem(actionName);\r\n          if (item) {\r\n            appliedNgxMdeShortcuts[actionName]?.unsubscribe();\r\n            applyShortcut(shortcut, item.action);\r\n            item.shortcut = shortcut;\r\n          } else if (defaultItem) {\r\n            appliedNgxMdeShortcuts[actionName]?.unsubscribe();\r\n            applyShortcut(shortcut, defaultItem.action);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.options.shortcuts = shortcuts;\r\n  }\r\n\r\n  /**\r\n   * Adds the SVG specified inside `item.icon` to the injected `MatIconRegistry` instance.\r\n   */\r\n  private addSvgIcon(item: ToolbarItemNormalized) {\r\n    switch (item.icon.format) {\r\n      case 'svgString':\r\n        this.iconRegistry.addSvgIconLiteral(\r\n          item.icon.iconName,\r\n          this.domSanitizer.bypassSecurityTrustHtml(item.icon.svgHtmlString)\r\n        );\r\n        break;\r\n      case 'svgFile':\r\n        this.iconRegistry.addSvgIcon(\r\n          item.icon.iconName,\r\n          this.domSanitizer.bypassSecurityTrustResourceUrl(item.icon.runtimePath)\r\n        );\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the custom statusbar or the default statusbar as fallback.\r\n   */\r\n  private applyStatusbarItems() {\r\n    let items: StatusbarItemDef[];\r\n    if (this.statusbar.length) {\r\n      items = this.statusbar;\r\n    } else {\r\n      items = this.statusbarService.DEFAULT_STATUSBAR;\r\n    }\r\n    this.normalizedStatusbarItems = [];\r\n    for (const toolbarItem of items) {\r\n      const item = this.getNormalizedStatusbarItem(toolbarItem);\r\n      if (!item) {\r\n        console.warn(`No default item defined for name \"${toolbarItem}\"`);\r\n        continue;\r\n      }\r\n      this.normalizedStatusbarItems.push(item);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a complete item for all combinations of how a status item can be specified and\r\n   * resolves the current value of internationalized properties. Only returns `undefined` for\r\n   * items specified by name and no such item can be found.\r\n   *\r\n   * In detail, item normalization means (in addition to i18n resolution):\r\n   * - For built-in items specified by name string, resolves the default item.\r\n   * - For custom items, returns as is.\r\n   * - For unknown items specified by name string, returns `undefined`.\r\n   */\r\n  private getNormalizedStatusbarItem(statusbarItem: StatusbarItemDef): StatusbarItemNormalized | undefined {\r\n    const getValue = (value: OptionalI18n<Observable<string>>): Observable<string> => {\r\n      if (value instanceof Observable) {\r\n        return value;\r\n      } else {\r\n        return value[this.language] || value.default;\r\n      }\r\n    };\r\n\r\n    if (typeof statusbarItem === 'string') {\r\n      return this.statusbarService.getDefaultItem(statusbarItem);\r\n    } else {\r\n      return {\r\n        name: statusbarItem.name,\r\n        value: getValue(statusbarItem.value),\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executes the `item.isActive()` function for all toolbar items and saves the state in `activeItems`.\r\n   */\r\n  private determineActiveButtons() {\r\n    this.activeToolbarItems = new Array(this.normalizedToolbarItems.length);\r\n    for (let i = 0; i < this.normalizedToolbarItems.length; i++) {\r\n      const item = this.normalizedToolbarItems[i];\r\n      if (item.isActive) {\r\n        this.activeToolbarItems[i] = item.isActive();\r\n      } else {\r\n        this.activeToolbarItems[i] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the disabled state. If disabled, the full-size preview activated.\r\n   */\r\n  private applyDisabled() {\r\n    if (this.disabled) {\r\n      this.showPreview = true;\r\n      this.showSideBySidePreview = false;\r\n      this.shortcutResetter.next();\r\n    } else {\r\n      this.showPreview = false;\r\n      this.showSideBySidePreview = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the material theme to both the editor and the preview. Particularly adds / removes\r\n   * an underline element known from Angular Material `mat-input` form fields.\r\n   */\r\n  private applyMaterialStyle() {\r\n    const codemirror = this.hostElement.nativeElement.querySelector('.CodeMirror');\r\n    if (codemirror) {\r\n      const underline = codemirror.querySelector('.underline');\r\n      if (this.materialStyle) {\r\n        if (!underline) {\r\n          const newUnderline = document.createElement('div');\r\n          newUnderline.setAttribute('class', 'underline');\r\n          const newRipple = document.createElement('div');\r\n          newRipple.setAttribute('class', 'ripple');\r\n          newUnderline.append(newRipple);\r\n          codemirror.append(newUnderline);\r\n        }\r\n      } else {\r\n        underline?.remove();\r\n      }\r\n    }\r\n    const preview = this.hostElement.nativeElement.querySelector('.ngx-markdown-editor-preview');\r\n    if (preview) {\r\n      const underline = preview.querySelector('.underline');\r\n      if (this.materialStyle) {\r\n        if (!underline) {\r\n          const newUnderline = document.createElement('div');\r\n          newUnderline.setAttribute('class', 'underline');\r\n          preview.append(newUnderline);\r\n        }\r\n      } else {\r\n        underline?.remove();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds and removes classes to/from the CodeMirror element according to configuration.\r\n   */\r\n  private setCodeMirrorClasses() {\r\n    const codemirror = this.hostElement.nativeElement.querySelector('.CodeMirror');\r\n    if (this.options.lineNumbers) {\r\n      codemirror?.classList.add('CodeMirror-lineNumbers');\r\n    } else {\r\n      codemirror?.classList.remove('CodeMirror-lineNumbers');\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"label\" class=\"ngx-markdown-editor-label\">\r\n  {{ label }} <span class=\"required-marker\">{{ required ? '*' : '' }}</span>\r\n</div>\r\n<div *ngIf=\"showToolbar\" class=\"ngx-markdown-editor-toolbar\">\r\n  <ng-container *ngFor=\"let item of normalizedToolbarItems; index as i\" [ngSwitch]=\"item.name\">\r\n    <ng-template [ngSwitchCase]=\"'|'\">\r\n      <div class=\"mde-toolbar-separator\"></div>\r\n    </ng-template>\r\n\r\n    <ng-template [ngSwitchCase]=\"'setHeadingLevel'\">\r\n      <mat-form-field floatLabel=\"never\" [matTooltip]=\"toolbarItemTooltips[i]\">\r\n        <mat-label>\r\n          <mat-icon *ngIf=\"item.icon.format === 'material'\">\r\n            {{ item.icon.iconName }}\r\n          </mat-icon>\r\n          <mat-icon *ngIf=\"item.icon.format !== 'material'\" [svgIcon]=\"item.icon.iconName\"> </mat-icon>\r\n        </mat-label>\r\n        <div (mousedown)=\"blockBlur = true\">\r\n          <mat-select\r\n            [value]=\"activeToolbarItems[i]\"\r\n            [disabled]=\"disabled || (showPreview && item.disableOnPreview)\"\r\n            (selectionChange)=\"item.action($event.value)\"\r\n            (closed)=\"mde.cm.focus(); blockBlur = false\"\r\n            #setHeadingLevel\r\n          >\r\n            <mat-option value=\"0\">---</mat-option>\r\n            <mat-option *ngFor=\"let j of [1, 2, 3, 4, 5, 6]\" [value]=\"j\">H{{ j }}</mat-option>\r\n          </mat-select>\r\n        </div>\r\n      </mat-form-field>\r\n    </ng-template>\r\n\r\n    <ng-template ngSwitchDefault>\r\n      <button\r\n        mat-button\r\n        (mousedown)=\"blockBlur = true\"\r\n        (mouseup)=\"blockBlur = false\"\r\n        (click)=\"onButtonClick(item)\"\r\n        [matTooltip]=\"toolbarItemTooltips[i]\"\r\n        [class.active]=\"activeToolbarItems[i]\"\r\n        [disabled]=\"disabled || (showPreview && item.disableOnPreview)\"\r\n      >\r\n        <mat-icon *ngIf=\"item.icon.format === 'material'\">\r\n          {{ item.icon.iconName }}\r\n        </mat-icon>\r\n        <mat-icon *ngIf=\"item.icon.format !== 'material'\" [svgIcon]=\"item.icon.iconName\"> </mat-icon>\r\n      </button>\r\n    </ng-template>\r\n  </ng-container>\r\n</div>\r\n<div class=\"ngx-markdown-editor-wrapper\" tabindex=\"-1\">\r\n  <div [ngStyle]=\"{ display: showPreview ? 'none' : '' }\" class=\"ngx-markdown-editor-text-editor\"></div>\r\n  <div [ngStyle]=\"{ display: showPreview || showSideBySidePreview ? '' : 'none' }\" class=\"ngx-markdown-editor-preview\">\r\n    <div class=\"preview-wrapper\">\r\n      <markdown [data]=\"mde.getContent()\" (ready)=\"replaceCheckboxDummies()\" #markdown></markdown>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"showStatusbar\" class=\"ngx-markdown-editor-statusbar\">\r\n  <ng-container *ngFor=\"let item of normalizedStatusbarItems\" [ngSwitch]=\"item.name\">\r\n    <div *ngSwitchCase=\"'|'\" class=\"mde-statusbar-separator\"></div>\r\n    <div *ngSwitchDefault class=\"mde-statusbar-item\">{{ item.value | async }}</div>\r\n  </ng-container>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { Observable } from 'rxjs';\r\n\r\n/**\r\n * An injectable hotkeys service to add keybindings.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class Keybindings {\r\n  constructor(private eventManager: EventManager) {}\r\n\r\n  /**\r\n   * Adds an _keydown_ event listener to the Angular `EventManager` with the specified\r\n   * `keys`. The listener is applied to specified `element`. Returns an RxJS observable\r\n   * of the keyboard event.\r\n   *\r\n   * @param element The HTML element to which the keybinding shall be applied to.\r\n   * @param keys The key combination which shall trigger the event.\r\n   */\r\n  addKeybinding(element: HTMLElement, keys: string): Observable<KeyboardEvent> {\r\n    const event = `keydown.${keys}`;\r\n\r\n    return new Observable<KeyboardEvent>((observer) => {\r\n      const handler = (e: KeyboardEvent) => {\r\n        e.preventDefault();\r\n        observer.next(e);\r\n      };\r\n\r\n      const dispose = this.eventManager.addEventListener(element, event, handler);\r\n\r\n      return () => {\r\n        dispose();\r\n      };\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MarkdownEditor } from '@mdefy/markdown-editor-core';\r\nimport { MarkdownEditorComponent } from '../component/markdown-editor.component';\r\nimport { ToolbarItemName, ToolbarItemNormalized } from '../types/toolbar';\r\n\r\n@Injectable()\r\nexport class ToolbarService {\r\n  private _defaultItems: ToolbarItemNormalized[];\r\n\r\n  /**\r\n   * The default configurations of all items\r\n   */\r\n  public get DEFAULT_ITEMS(): ToolbarItemNormalized[] {\r\n    return this._defaultItems;\r\n  }\r\n\r\n  /**\r\n   * The default toolbar setup.\r\n   */\r\n  public readonly DEFAULT_TOOLBAR: ToolbarItemName[] = [\r\n    'setHeadingLevel',\r\n    'toggleHeadingLevel',\r\n    'increaseHeadingLevel',\r\n    'decreaseHeadingLevel',\r\n    'toggleBold',\r\n    'toggleItalic',\r\n    'toggleStrikethrough',\r\n    '|',\r\n    'toggleUnorderedList',\r\n    'toggleOrderedList',\r\n    'toggleCheckList',\r\n    '|',\r\n    'toggleQuote',\r\n    'toggleInlineCode',\r\n    'insertCodeBlock',\r\n    '|',\r\n    'insertLink',\r\n    'insertImageLink',\r\n    'insertTable',\r\n    'insertHorizontalRule',\r\n    '|',\r\n    'toggleRichTextMode',\r\n    'formatContent',\r\n    '|',\r\n    'downloadAsFile',\r\n    'importFromFile',\r\n    '|',\r\n    'togglePreview',\r\n    'toggleSideBySidePreview',\r\n    '|',\r\n    'undo',\r\n    'redo',\r\n    '|',\r\n    'openMarkdownGuide',\r\n  ];\r\n\r\n  /**\r\n   * Returns the default configuration of the item with the specified name.\r\n   * Returns `undefined`, if no item with the specified name can be found.\r\n   */\r\n  public getDefaultItem(itemName: string): ToolbarItemNormalized | undefined {\r\n    return this.DEFAULT_ITEMS.find((i) => i.name === itemName);\r\n  }\r\n\r\n  /**\r\n   * Defines the default toolbar items.\r\n   * Cannot be done statically as the actions depend on the `MarkdownEditorComponent` instance.\r\n   */\r\n  public defineDefaultItems(ngxMde: MarkdownEditorComponent) {\r\n    const defaultItems: ToolbarItemNormalized[] = [\r\n      {\r\n        name: 'setHeadingLevel',\r\n        action: (level: 0 | 1 | 2 | 3 | 4 | 5 | 6) => ngxMde.mde.setHeadingLevel(level),\r\n        shortcut: 'Shift-Ctrl-Alt-H',\r\n        isActive: () => {\r\n          if (!ngxMde.mde.hasTokenAtCursorPos('header')) return 0;\r\n          const token = ngxMde.mde.cm.getTokenAt(ngxMde.mde.getCursorPos());\r\n          return token.state.base.header as number;\r\n        },\r\n        tooltip: 'Set Heading Level',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'format_heading',\r\n          svgHtmlString: FORMAT_HEADING,\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleHeadingLevel',\r\n        action: () => ngxMde.mde.increaseHeadingLevel(),\r\n        tooltip: 'Heading',\r\n        shortcut: 'Alt-H',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'format_heading',\r\n          svgHtmlString: FORMAT_HEADING,\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'increaseHeadingLevel',\r\n        action: () => ngxMde.mde.increaseHeadingLevel(),\r\n        tooltip: 'Smaller Heading',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'format_heading_decrease',\r\n          svgHtmlString: FORMAT_HEADING_SMALLER,\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'decreaseHeadingLevel',\r\n        action: () => ngxMde.mde.decreaseHeadingLevel(),\r\n        tooltip: 'Bigger Heading',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'format_heading_increase',\r\n          svgHtmlString: FORMAT_HEADING_BIGGER,\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleBold',\r\n        action: () => ngxMde.mde.toggleBold(),\r\n        isActive: () => ngxMde.mde.hasTokenAtCursorPos('strong'),\r\n        tooltip: 'Toggle Bold',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_bold',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleItalic',\r\n        action: () => ngxMde.mde.toggleItalic(),\r\n        isActive: () => ngxMde.mde.hasTokenAtCursorPos('em'),\r\n        tooltip: 'Toggle Italic',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_italic',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleStrikethrough',\r\n        action: () => ngxMde.mde.toggleStrikethrough(),\r\n        isActive: () => ngxMde.mde.hasTokenAtCursorPos('strikethrough'),\r\n        tooltip: 'Toggle Strikethrough',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_strikethrough',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleUnorderedList',\r\n        action: () => ngxMde.mde.toggleUnorderedList(),\r\n        isActive: () => this.isListTypeActive(ngxMde, 'unordered'),\r\n        tooltip: 'Toggle Unordered List',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_list_bulleted',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleOrderedList',\r\n        action: () => ngxMde.mde.toggleOrderedList(),\r\n        isActive: () => this.isListTypeActive(ngxMde, 'ordered'),\r\n        tooltip: 'Toggle Ordered List',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_list_numbered',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleCheckList',\r\n        action: () => ngxMde.mde.toggleCheckList(),\r\n        isActive: () => this.isListTypeActive(ngxMde, 'check'),\r\n        tooltip: 'Toggle Checklist',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'check_box',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleQuote',\r\n        action: () => ngxMde.mde.toggleQuote(),\r\n        isActive: () => ngxMde.mde.hasTokenAtCursorPos('quote'),\r\n        tooltip: 'Toggle Quotation',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_quote',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleInlineCode',\r\n        action: () => ngxMde.mde.toggleInlineCode(),\r\n        isActive: () => this.isCodeTypeActive(ngxMde, 'inline'),\r\n        tooltip: 'Toggle Inline Code',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'code',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'insertCodeBlock',\r\n        action: () => ngxMde.mde.insertCodeBlock(),\r\n        isActive: () => this.isCodeTypeActive(ngxMde, 'block'),\r\n        tooltip: 'Insert Code Block',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'file_code',\r\n          svgHtmlString: FILE_CODE,\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'insertLink',\r\n        action: () => ngxMde.mde.insertLink(),\r\n        isActive: () =>\r\n          (ngxMde.mde.hasTokenAtCursorPos('link-text') || ngxMde.mde.hasTokenAtCursorPos('link')) &&\r\n          !ngxMde.mde.hasTokenAtCursorPos('image'),\r\n        tooltip: 'Insert Link',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'insert_link',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'insertImageLink',\r\n        action: () => ngxMde.mde.insertImageLink(),\r\n        isActive: () => ngxMde.mde.hasTokenAtCursorPos('image'),\r\n        tooltip: 'Insert Image Link',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'image',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'insertTable',\r\n        action: () => ngxMde.mde.insertTable(),\r\n        tooltip: 'Insert Table',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'table_chart',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'insertHorizontalRule',\r\n        action: () => ngxMde.mde.insertHorizontalRule(),\r\n        isActive: () => ngxMde.mde.hasTokenAtCursorPos('hr'),\r\n        tooltip: 'Insert Horizontal Rule',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'horizontal_rule',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'toggleRichTextMode',\r\n        action: () => ngxMde.mde.toggleRichTextMode(),\r\n        isActive: () => {\r\n          const mode = ngxMde.mde.cm.getOption('mode');\r\n          return mode === 'gfm' || mode.name === 'gfm';\r\n        },\r\n        tooltip: 'Toggle Rich-Text Mode',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'highlight',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'formatContent',\r\n        action: () => ngxMde.mde.formatContent(),\r\n        tooltip: 'Format Content',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'format_paint',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'downloadAsFile',\r\n        action: () => ngxMde.mde.downloadAsFile(),\r\n        tooltip: 'Download As File',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'get_app',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'importFromFile',\r\n        action: () => ngxMde.mde.importFromFile(),\r\n        tooltip: 'Import From File',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'upload',\r\n          svgHtmlString: UPLOAD,\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'togglePreview',\r\n        action: () => ngxMde.togglePreview(),\r\n        shortcut: 'Alt-P',\r\n        isActive: () => ngxMde.showPreview,\r\n        tooltip: 'Toggle Preview',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'preview',\r\n        },\r\n        disableOnPreview: false,\r\n      },\r\n      {\r\n        name: 'toggleSideBySidePreview',\r\n        action: () => ngxMde.toggleSideBySidePreview(),\r\n        shortcut: 'Shift-Alt-P',\r\n        isActive: () => ngxMde.showSideBySidePreview,\r\n        tooltip: 'Toggle Side-by-Side Preview',\r\n        icon: {\r\n          format: 'svgString',\r\n          iconName: 'column',\r\n          svgHtmlString: COLUMN,\r\n        },\r\n        disableOnPreview: false,\r\n      },\r\n      {\r\n        name: 'undo',\r\n        action: () => ngxMde.mde.undo(),\r\n        tooltip: 'Undo',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'undo',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'redo',\r\n        action: () => ngxMde.mde.redo(),\r\n        shortcut: 'Ctrl-S',\r\n        tooltip: 'Redo',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'redo',\r\n        },\r\n        disableOnPreview: true,\r\n      },\r\n      {\r\n        name: 'openMarkdownGuide',\r\n        action: () => ngxMde.mde.openMarkdownGuide(),\r\n        tooltip: 'Open Markdown Guide',\r\n        icon: {\r\n          format: 'material',\r\n          iconName: 'help',\r\n        },\r\n        disableOnPreview: false,\r\n      },\r\n      // Normalize separator item to reduce type complexity in template.\r\n      // Effectively, only the `name` property is needed.\r\n      {\r\n        name: '|',\r\n        action: () => {},\r\n        tooltip: '',\r\n        icon: { format: 'material', iconName: '' },\r\n        disableOnPreview: false,\r\n      },\r\n    ];\r\n\r\n    this._defaultItems = defaultItems;\r\n  }\r\n\r\n  private isListTypeActive(\r\n    ngxMde: MarkdownEditorComponent,\r\n    listType: NonNullable<ReturnType<MarkdownEditor['getListTypeOfLine']>>\r\n  ) {\r\n    const isList = ngxMde.mde.hasTokenAtCursorPos('list');\r\n    if (!isList) return false;\r\n\r\n    const selections = ngxMde.mde.cm.listSelections();\r\n    let isListType = false;\r\n    if (selections?.length) {\r\n      const lineNumber = selections[selections.length - 1].from().line;\r\n      isListType = ngxMde.mde.getListTypeOfLine(lineNumber) === listType;\r\n    }\r\n    return isListType;\r\n  }\r\n\r\n  private isCodeTypeActive(ngxMde: MarkdownEditorComponent, codeType: 'inline' | 'block') {\r\n    const isCode = ngxMde.mde.hasTokenAtCursorPos('code');\r\n    if (!isCode) return false;\r\n\r\n    const token = ngxMde.mde.cm.getTokenAt(ngxMde.mde.getCursorPos());\r\n    if (codeType === 'block') {\r\n      return token.state.overlay.codeBlock;\r\n    } else {\r\n      return token.state.overlay.code;\r\n    }\r\n  }\r\n}\r\n\r\n/* eslint-disable max-len */\r\nconst COLUMN = `\r\n  <!-- Icon from Font Awesome: https://fontawesome.com/icons/columns?style=solid; License: https://fontawesome.com/license -->\r\n  <svg\r\n    aria-hidden=\"true\"\r\n    focusable=\"false\"\r\n    data-prefix=\"fas\"\r\n    data-icon=\"columns\"\r\n    class=\"svg-inline--fa fa-columns fa-w-16\"\r\n    role=\"img\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 512 512\"\r\n    licenseUrl=\"https://fontawesome.com/license\"\r\n  >\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z\"\r\n    ></path>\r\n  </svg>\r\n`;\r\n\r\nconst FILE_CODE = `\r\n  <!-- Icon from Font Awesome: https://fontawesome.com/icons/file-code?style=solid; License: https://fontawesome.com/license -->\r\n  <svg\r\n    aria-hidden=\"true\"\r\n    focusable=\"false\"\r\n    data-prefix=\"fas\"\r\n    data-icon=\"file-code\"\r\n    class=\"svg-inline--fa fa-file-code fa-w-12\"\r\n    role=\"img\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 384 512\"\r\n    licenseUrl=\"https://fontawesome.com/license\"\r\n  >\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M384 121.941V128H256V0h6.059c6.365 0 12.47 2.529 16.971 7.029l97.941 97.941A24.005 24.005 0 0 1 384 121.941zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zM123.206 400.505a5.4 5.4 0 0 1-7.633.246l-64.866-60.812a5.4 5.4 0 0 1 0-7.879l64.866-60.812a5.4 5.4 0 0 1 7.633.246l19.579 20.885a5.4 5.4 0 0 1-.372 7.747L101.65 336l40.763 35.874a5.4 5.4 0 0 1 .372 7.747l-19.579 20.884zm51.295 50.479l-27.453-7.97a5.402 5.402 0 0 1-3.681-6.692l61.44-211.626a5.402 5.402 0 0 1 6.692-3.681l27.452 7.97a5.4 5.4 0 0 1 3.68 6.692l-61.44 211.626a5.397 5.397 0 0 1-6.69 3.681zm160.792-111.045l-64.866 60.812a5.4 5.4 0 0 1-7.633-.246l-19.58-20.885a5.4 5.4 0 0 1 .372-7.747L284.35 336l-40.763-35.874a5.4 5.4 0 0 1-.372-7.747l19.58-20.885a5.4 5.4 0 0 1 7.633-.246l64.866 60.812a5.4 5.4 0 0 1-.001 7.879z\"\r\n    ></path>\r\n  </svg>\r\n`;\r\n\r\nconst FORMAT_HEADING = `\r\n  <!-- Icon from Font Awesome: https://fontawesome.com/icons/heading?style=solid; License: https://fontawesome.com/license -->\r\n  <svg\r\n    aria-hidden=\"true\"\r\n    focusable=\"false\"\r\n    data-prefix=\"fas\"\r\n    data-icon=\"heading\"\r\n    class=\"svg-inline--fa fa-heading fa-w-16\"\r\n    role=\"img\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"100%\"\r\n    height=\"100%\"\r\n    viewBox=\"0 0 512 512\"\r\n    licenseUrl=\"https://fontawesome.com/license\"\r\n  >\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M448 96v320h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H320a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V288H160v128h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V96H32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-32v128h192V96h-32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16z\"\r\n    ></path>\r\n  </svg>\r\n`;\r\n\r\nconst FORMAT_HEADING_BIGGER = `\r\n  <!-- Icon from Font Awesome: https://fontawesome.com/icons/heading?style=solid; License: https://fontawesome.com/license -->\r\n  <svg\r\n    aria-hidden=\"true\"\r\n    focusable=\"false\"\r\n    data-prefix=\"fas\"\r\n    data-icon=\"heading\"\r\n    class=\"svg-inline--fa fa-heading fa-w-16\"\r\n    role=\"img\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"100%\"\r\n    height=\"100%\"\r\n    viewBox=\"0 0 720 720\"\r\n    licenseUrl=\"https://fontawesome.com/license\"\r\n  >\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M448 200v320h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H320a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V392H160v128h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V200H32a16 16 0 0 1-16-16V152a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-32v128h192V200h-32a16 16 0 0 1-16-16V152a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16z\"\r\n    ></path>\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M620 285 l87 150 h-174 z\"\r\n    ></path>\r\n  </svg>\r\n`;\r\n\r\nconst FORMAT_HEADING_SMALLER = `\r\n  <!-- Icon from Font Awesome: https://fontawesome.com/icons/heading?style=solid; License: https://fontawesome.com/license -->\r\n  <svg\r\n    aria-hidden=\"true\"\r\n    focusable=\"false\"\r\n    data-prefix=\"fas\"\r\n    data-icon=\"heading\"\r\n    class=\"svg-inline--fa fa-heading fa-w-16\"\r\n    role=\"img\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"100%\"\r\n    height=\"100%\"\r\n    viewBox=\"0 0 720 720\"\r\n    licenseUrl=\"https://fontawesome.com/license\"\r\n  >\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M448 200v320h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H320a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V392H160v128h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V200H32a16 16 0 0 1-16-16V152a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-32v128h192V200h-32a16 16 0 0 1-16-16V152a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16z\"\r\n    ></path>\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M620 435 l87 -150 h-174 z\"\r\n    ></path>\r\n  </svg>\r\n`;\r\n\r\nconst UPLOAD = `\r\n  <svg\r\n    focusable=\"false\"\r\n    data-icon=\"upload\"\r\n    role=\"img\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"100%\"\r\n    height=\"100%\"\r\n    viewBox=\"2 2 20 20\"\r\n  >\r\n    <path d=\"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z\" />\r\n  </svg>\r\n`;\r\n","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { MarkdownEditorModule } from 'projects/ngx-markdown-editor/src/public-api';\r\nimport { AppComponent } from './app.component';\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [BrowserModule, MarkdownEditorModule],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","import { EventEmitter } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n/**\r\n * An event emitter that is able to transform an RxJS observable\r\n * into an Angular event.\r\n */\r\nexport class ObservableEmitter<T> extends EventEmitter<T> {\r\n  /**\r\n   * Subscribes to the specified RxJS observable and emits an event\r\n   * containing the observed value. Unsubscribes the passed observable\r\n   * when the event is unsubscribed.\r\n   */\r\n  emitObservable(o: Observable<T>) {\r\n    const subscription = o.subscribe((x: T) => this.emit(x));\r\n    this.subscribe(\r\n      () => {},\r\n      undefined,\r\n      () => subscription.unsubscribe()\r\n    );\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of ngx-markdown-editor\r\n */\r\n\r\nexport { MarkdownEditorComponent } from './lib/component/markdown-editor.component';\r\nexport { MarkdownEditorModule, MarkdownEditorModuleConfig } from './lib/component/markdown-editor.module';\r\nexport { LanguageTag } from './lib/types/language-tag';\r\nexport { OptionalI18n } from './lib/types/optional-i18n';\r\nexport { Options } from './lib/types/options';\r\nexport { StatusbarItem, StatusbarItemDef, StatusbarItemName } from './lib/types/statusbar';\r\nexport { Icon, ToolbarItem, ToolbarItemDef, ToolbarItemName } from './lib/types/toolbar';\r\nexport { fromCmEvent } from './lib/util/from-cm-event';\r\n","import { Component, ViewChild } from '@angular/core';\r\nimport {\r\n  MarkdownEditorComponent,\r\n  Options,\r\n  StatusbarItemDef,\r\n  ToolbarItemDef,\r\n} from 'projects/ngx-markdown-editor/src/public-api';\r\nimport { fromEvent, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent {\r\n  @ViewChild(MarkdownEditorComponent) ngxMde: MarkdownEditorComponent;\r\n\r\n  public toolbarButtons: ToolbarItemDef[] = [\r\n    {\r\n      name: 'toggleBold',\r\n      shortcut: 'Alt-M',\r\n      icon: { format: 'material', iconName: 'star' },\r\n    },\r\n  ];\r\n\r\n  public data = '**Initial content**';\r\n  public content = '';\r\n\r\n  public statusbarItems: StatusbarItemDef[] = [\r\n    'characterCount',\r\n    '|',\r\n    {\r\n      name: 'cursorPosition',\r\n      value: {\r\n        de: of('Deutsch'),\r\n        default: fromEvent(document, 'click').pipe(map((e: MouseEvent) => e.clientX.toString())),\r\n      },\r\n    },\r\n    '|',\r\n  ];\r\n\r\n  public options: Partial<Options> = {\r\n    markupThemes: ['preview-like-markup'],\r\n  };\r\n\r\n  public materialStyle = 'legacy';\r\n\r\n  public disabled = false;\r\n\r\n  public showToolbar = true;\r\n  public showStatusbar = true;\r\n\r\n  test() {\r\n    this.ngxMde.mde.setContent('Initial _Markdown_ content...');\r\n  }\r\n\r\n  onContentChange(event: any) {\r\n    this.content = event.instance.getValue();\r\n  }\r\n}\r\n","<h1>Ngx Markdown Editor</h1>\r\n\r\n<ngx-markdown-editor></ngx-markdown-editor>\r\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ModuleWithProviders, NgModule, SecurityContext } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { MarkdownModule, MarkdownModuleConfig, SECURITY_CONTEXT } from 'ngx-markdown';\r\nimport { MarkdownEditorComponent } from './markdown-editor.component';\r\n\r\nexport interface MarkdownEditorModuleConfig {\r\n  previewConfig?: Omit<MarkdownModuleConfig, 'loader'>;\r\n}\r\n\r\n@NgModule({\r\n  declarations: [MarkdownEditorComponent],\r\n  imports: [\r\n    CommonModule,\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    HttpClientModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatTooltipModule,\r\n    MarkdownModule.forRoot(),\r\n  ],\r\n  exports: [MarkdownEditorComponent],\r\n})\r\nexport class MarkdownEditorModule {\r\n  static forRoot(config?: MarkdownEditorModuleConfig): ModuleWithProviders<MarkdownEditorModule> {\r\n    return {\r\n      ngModule: MarkdownEditorModule,\r\n      providers: [\r\n        config?.previewConfig?.markedOptions || [],\r\n        {\r\n          provide: SECURITY_CONTEXT,\r\n          useValue: config?.previewConfig?.sanitize ?? SecurityContext.HTML,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  static forChild(): ModuleWithProviders<MarkdownEditorModule> {\r\n    return {\r\n      ngModule: MarkdownEditorModule,\r\n    };\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Observable } from 'rxjs';\r\n\r\n/* eslint-disable @typescript-eslint/unified-signatures */\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'change'\r\n): Observable<{ instance: CodeMirror.Editor; changeObj: CodeMirror.EditorChangeLinkedList }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'changes'\r\n): Observable<{ instance: CodeMirror.Editor; changes: CodeMirror.EditorChangeLinkedList[] }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'beforeChange'\r\n): Observable<{ instance: CodeMirror.Editor; changeObj: CodeMirror.EditorChangeCancellable }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'cursorActivity'\r\n): Observable<{ instance: CodeMirror.Editor }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'keyHandled'\r\n): Observable<{ instance: CodeMirror.Editor; name: string; event: KeyboardEvent }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'inputRead'\r\n): Observable<{ instance: CodeMirror.Editor; changeObj: CodeMirror.EditorChange }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'electricInput'\r\n): Observable<{ instance: CodeMirror.Editor; line: number }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'beforeSelectionChange'\r\n): Observable<{ instance: CodeMirror.Editor; obj: CodeMirror.EditorSelectionChange }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'viewportChange'\r\n): Observable<{ instance: CodeMirror.Editor; from: number; to: number }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'swapDoc'\r\n): Observable<{ instance: CodeMirror.Editor; oldDoc: CodeMirror.Doc }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'gutterClick'\r\n): Observable<{ instance: CodeMirror.Editor; line: number; gutter: string; clickEvent: MouseEvent }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'gutterContextMenu'\r\n): Observable<{ instance: CodeMirror.Editor; line: number; gutter: string; contextMenu: MouseEvent }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'focus'\r\n): Observable<{ instance: CodeMirror.Editor; event: FocusEvent }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'blur'\r\n): Observable<{ instance: CodeMirror.Editor; event: FocusEvent }>;\r\n\r\nexport function fromCmEvent(cm: CodeMirror.Editor, eventName: 'scroll'): Observable<{ instance: CodeMirror.Editor }>;\r\nexport function fromCmEvent(cm: CodeMirror.Editor, eventName: 'refresh'): Observable<{ instance: CodeMirror.Editor }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'optionChange'\r\n): Observable<{ instance: CodeMirror.Editor; option: string }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'scrollCursorIntoView'\r\n): Observable<{ instance: CodeMirror.Editor; event: Event }>;\r\nexport function fromCmEvent(cm: CodeMirror.Editor, eventName: 'update'): Observable<{ instance: CodeMirror.Editor }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'renderLine'\r\n): Observable<{ instance: CodeMirror.Editor; line: CodeMirror.LineHandle; element: HTMLElement }>;\r\nexport function fromCmEvent(\r\n  cm: CodeMirror.Editor,\r\n  eventName: 'overwriteToggle'\r\n): Observable<{ instance: CodeMirror.Editor; overwrite: boolean }>;\r\nexport function fromCmEvent<K extends CodeMirror.DOMEvent & keyof GlobalEventHandlersEventMap>(\r\n  cm: CodeMirror.Editor,\r\n  eventName: K\r\n): Observable<{ instance: CodeMirror.Editor; event: GlobalEventHandlersEventMap[K] }>;\r\nexport function fromCmEvent<K extends CodeMirror.DOMEvent & keyof DocumentAndElementEventHandlersEventMap>(\r\n  cm: CodeMirror.Editor,\r\n  eventName: K\r\n): Observable<{ instance: CodeMirror.Editor; event: DocumentAndElementEventHandlersEventMap[K] }>;\r\n\r\n/**\r\n * Transforms a _CodeMirror_ event to an RxJS observable.\r\n *\r\n * @param cm the `CodeMirror.Editor` instance of which the event shall be observed\r\n * @param eventName the name of a _CodeMirror_ event\r\n */\r\nexport function fromCmEvent(cm: CodeMirror.Editor, eventName: string): Observable<any> {\r\n  return new Observable((subscriber) => {\r\n    let handler: () => void;\r\n    switch (eventName) {\r\n      case 'change':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], changeObj: args[1] });\r\n        break;\r\n      case 'changes':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], changes: args[1] });\r\n        break;\r\n      case 'beforeChange':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], changeObj: args[1] });\r\n        break;\r\n      case 'cursorActivity':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0] });\r\n        break;\r\n      case 'keyHandled':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], name: args[1], event: args[2] });\r\n        break;\r\n      case 'inputRead':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], changeObj: args[1] });\r\n        break;\r\n      case 'electricInput':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], line: args[1] });\r\n        break;\r\n      case 'beforeSelectionChange':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], obj: args[1] });\r\n        break;\r\n      case 'viewportChange':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], from: args[1], to: args[2] });\r\n        break;\r\n      case 'swapDoc':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], oldDoc: args[1] });\r\n        break;\r\n      case 'gutterClick':\r\n        handler = (...args: any[]) =>\r\n          subscriber.next({ instance: args[0], line: args[1], gutter: args[2], clickEvent: args[3] });\r\n        break;\r\n      case 'gutterContextMenu':\r\n        handler = (...args: any[]) =>\r\n          subscriber.next({ instance: args[0], line: args[1], gutter: args[2], contextMenu: args[3] });\r\n        break;\r\n      case 'focus':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], event: args[1] });\r\n        break;\r\n      case 'blur':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], event: args[1] });\r\n        break;\r\n      case 'scroll':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0] });\r\n        break;\r\n      case 'refresh':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0] });\r\n        break;\r\n      case 'optionChange':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], option: args[1] });\r\n        break;\r\n      case 'scrollCursorIntoView':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], event: args[1] });\r\n        break;\r\n      case 'update':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0] });\r\n        break;\r\n      case 'renderLine':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], line: args[1], element: args[2] });\r\n        break;\r\n      case 'overwriteToggle':\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], overwrite: args[1] });\r\n        break;\r\n      default:\r\n        handler = (...args: any[]) => subscriber.next({ instance: args[0], event: args[1] });\r\n    }\r\n\r\n    if (cm) {\r\n      cm.on(eventName, handler);\r\n      return () => cm.off(eventName, handler);\r\n    }\r\n\r\n    subscriber.error(new Error('CodeMirror instance is undefined'));\r\n    return;\r\n  });\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MarkdownEditor } from '@mdefy/markdown-editor-core';\r\nimport { Observable } from 'rxjs';\r\nimport { map, startWith } from 'rxjs/operators';\r\nimport { StatusbarItemName, StatusbarItemNormalized } from '../types/statusbar';\r\nimport { fromCmEvent } from '../util/from-cm-event';\r\n\r\n@Injectable()\r\nexport class StatusbarService {\r\n  private _defaultItems: StatusbarItemNormalized[];\r\n\r\n  /**\r\n   * The default configurations of all items.\r\n   */\r\n  public get DEFAULT_ITEMS(): StatusbarItemNormalized[] {\r\n    return this._defaultItems;\r\n  }\r\n\r\n  /**\r\n   * The default statusbar setup.\r\n   */\r\n  public DEFAULT_STATUSBAR: StatusbarItemName[] = ['wordCount', 'characterCount', '|', 'cursorPosition'];\r\n\r\n  /**\r\n   * Returns the default configuration of the item with the specified name.\r\n   * Returns `undefined`, if no item with the specified name can be found.\r\n   */\r\n  public getDefaultItem(itemName: string): StatusbarItemNormalized | undefined {\r\n    return this.DEFAULT_ITEMS.find((i) => i.name === itemName);\r\n  }\r\n\r\n  /**\r\n   * Defines the default statusbar items.\r\n   * Cannot be done statically as the values depend on the `MarkdownEditor` instance.\r\n   */\r\n  public defineDefaultItems(mde: MarkdownEditor) {\r\n    const defaultItems: StatusbarItemNormalized[] = [\r\n      {\r\n        name: 'wordCount',\r\n        value: fromCmEvent(mde.cm, 'changes').pipe(\r\n          startWith(true),\r\n          map(() => 'Words: ' + mde.getWordCount().toString())\r\n        ),\r\n      },\r\n      {\r\n        name: 'characterCount',\r\n        value: fromCmEvent(mde.cm, 'changes').pipe(\r\n          startWith(true),\r\n          map(() => 'Characters: ' + mde.getCharacterCount().toString())\r\n        ),\r\n      },\r\n      {\r\n        name: 'cursorPosition',\r\n        value: fromCmEvent(mde.cm, 'cursorActivity').pipe(\r\n          startWith(true),\r\n          map(() => {\r\n            const pos = mde.getCursorPos();\r\n            return `${pos.line}:${pos.ch}`;\r\n          })\r\n        ),\r\n      },\r\n      // Normalize separator item to reduce type complexity in template.\r\n      // Effectively, only the `name` property is needed.\r\n      {\r\n        name: '|',\r\n        value: new Observable(),\r\n      },\r\n    ];\r\n\r\n    this._defaultItems = defaultItems;\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic()\r\n  .bootstrapModule(AppModule)\r\n  .catch((err) => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}